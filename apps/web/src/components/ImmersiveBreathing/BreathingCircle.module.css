/**
 * BreathingCircle Styles
 *
 * Apple Watch-inspired breathing animation with flower petal pattern.
 * The circle expands on inhale/holdIn and contracts on exhale/holdOut.
 */

/* Container for the breathing visualization */
.container {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;
  max-width: 300px;
  aspect-ratio: 1;
  margin: 0 auto;
}

/* Orb container - holds the main circle and petals */
.orb {
  position: relative;
  width: 80%;
  height: 80%;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Main breathing circle */
.circle {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: radial-gradient(
    circle at 30% 30%,
    var(--color-breath-inhale-light) 0%,
    var(--color-breath-inhale) 40%,
    rgba(126, 200, 227, 0.6) 70%,
    transparent 100%
  );
  box-shadow:
    0 0 60px var(--color-breath-inhale-glow),
    inset 0 0 30px rgba(255, 255, 255, 0.2);
  transform: scale(1);
  transition-property: transform, background, box-shadow;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

/* Phase-specific circle styles */
.circleInhale {
  background: radial-gradient(
    circle at 30% 30%,
    var(--color-breath-inhale-light) 0%,
    var(--color-breath-inhale) 40%,
    rgba(126, 200, 227, 0.6) 70%,
    transparent 100%
  );
  box-shadow:
    0 0 80px var(--color-breath-glow-strong),
    inset 0 0 30px rgba(255, 255, 255, 0.3);
  transform: scale(1.5);
}

.circleHoldIn {
  background: radial-gradient(
    circle at 30% 30%,
    var(--color-breath-hold-light) 0%,
    var(--color-breath-hold) 40%,
    rgba(155, 143, 212, 0.6) 70%,
    transparent 100%
  );
  box-shadow:
    0 0 70px var(--color-breath-hold-glow),
    inset 0 0 30px rgba(255, 255, 255, 0.25);
  transform: scale(1.5);
}

.circleExhale {
  background: radial-gradient(
    circle at 30% 30%,
    var(--color-breath-exhale-light) 0%,
    var(--color-breath-exhale) 40%,
    rgba(126, 212, 166, 0.6) 70%,
    transparent 100%
  );
  box-shadow:
    0 0 50px var(--color-breath-exhale-glow),
    inset 0 0 25px rgba(255, 255, 255, 0.2);
  transform: scale(1);
}

.circleHoldOut {
  background: radial-gradient(
    circle at 30% 30%,
    rgba(107, 158, 125, 0.6) 0%,
    var(--color-wellness-forest) 40%,
    rgba(107, 158, 125, 0.4) 70%,
    transparent 100%
  );
  box-shadow:
    0 0 40px rgba(107, 158, 125, 0.3),
    inset 0 0 20px rgba(255, 255, 255, 0.15);
  transform: scale(1);
}

.circleIdle {
  background: radial-gradient(
    circle at 30% 30%,
    rgba(255, 255, 255, 0.2) 0%,
    rgba(200, 200, 220, 0.3) 40%,
    rgba(150, 150, 180, 0.2) 70%,
    transparent 100%
  );
  box-shadow:
    0 0 30px rgba(200, 200, 220, 0.2),
    inset 0 0 15px rgba(255, 255, 255, 0.1);
  transform: scale(1);
}

/* ============================================================================
   FLOWER PETALS (Apple Watch style)
   ============================================================================ */

.petals {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.petal {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background: radial-gradient(
    circle at center,
    rgba(255, 255, 255, 0.3) 0%,
    rgba(255, 255, 255, 0.1) 50%,
    transparent 70%
  );
  opacity: 0.5;
  mix-blend-mode: screen;
  transform-origin: center center;
  transition-property: transform, opacity;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

/* Position petals around the center */
.petal:nth-child(1) {
  transform: rotate(0deg) translateY(-15%);
}
.petal:nth-child(2) {
  transform: rotate(60deg) translateY(-15%);
}
.petal:nth-child(3) {
  transform: rotate(120deg) translateY(-15%);
}
.petal:nth-child(4) {
  transform: rotate(180deg) translateY(-15%);
}
.petal:nth-child(5) {
  transform: rotate(240deg) translateY(-15%);
}
.petal:nth-child(6) {
  transform: rotate(300deg) translateY(-15%);
}

/* Expanded petals (inhale/holdIn) */
.petalsExpanded .petal:nth-child(1) {
  transform: rotate(0deg) translateY(-25%);
  opacity: 0.7;
}
.petalsExpanded .petal:nth-child(2) {
  transform: rotate(60deg) translateY(-25%);
  opacity: 0.7;
}
.petalsExpanded .petal:nth-child(3) {
  transform: rotate(120deg) translateY(-25%);
  opacity: 0.7;
}
.petalsExpanded .petal:nth-child(4) {
  transform: rotate(180deg) translateY(-25%);
  opacity: 0.7;
}
.petalsExpanded .petal:nth-child(5) {
  transform: rotate(240deg) translateY(-25%);
  opacity: 0.7;
}
.petalsExpanded .petal:nth-child(6) {
  transform: rotate(300deg) translateY(-25%);
  opacity: 0.7;
}

/* ============================================================================
   INNER GLOW
   ============================================================================ */

.innerGlow {
  position: absolute;
  width: 40%;
  height: 40%;
  border-radius: 50%;
  background: radial-gradient(
    circle at center,
    rgba(255, 255, 255, 0.8) 0%,
    rgba(255, 255, 255, 0.3) 40%,
    transparent 70%
  );
  pointer-events: none;
}

/* ============================================================================
   PHASE TEXT AND TIMER
   ============================================================================ */

.textContainer {
  position: relative;
  z-index: 2;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-xs);
  text-align: center;
  color: white;
}

.phaseLabel {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-medium);
  text-transform: uppercase;
  letter-spacing: 0.1em;
  opacity: 0.9;
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.timer {
  font-size: var(--font-size-4xl);
  font-weight: var(--font-weight-bold);
  font-variant-numeric: tabular-nums;
  text-shadow: 0 2px 15px rgba(0, 0, 0, 0.4);
  min-width: 2ch;
}

.timerIdle {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-medium);
  opacity: 0.7;
}

/* ============================================================================
   RESPONSIVE ADJUSTMENTS
   ============================================================================ */

@media (max-width: 480px) {
  .container {
    max-width: 250px;
  }

  .phaseLabel {
    font-size: var(--font-size-base);
  }

  .timer {
    font-size: var(--font-size-3xl);
  }
}

/* ============================================================================
   REDUCED MOTION
   ============================================================================ */

@media (prefers-reduced-motion: reduce) {
  .circle,
  .petal {
    transition: none;
  }

  /* Show the phase without animation */
  .circleInhale,
  .circleHoldIn {
    transform: scale(1.2);
  }

  .circleExhale,
  .circleHoldOut,
  .circleIdle {
    transform: scale(1);
  }

  .petalsExpanded .petal {
    transform: rotate(var(--petal-rotation, 0deg)) translateY(-20%);
  }
}
